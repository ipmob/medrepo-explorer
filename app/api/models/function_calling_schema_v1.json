{
    "name": "extract_medical_report",
    "description": "Extract raw data from medical laboratory reports",
    "parameters": {
    "type": "object",
    "properties": {
    "patient_details": {
        "type": "object",
        "properties": {
            "name": {"type": "string"},
            "age": {"type": "integer"},
            "sex": {"type": "string"}
        },
        "required": ["name", "age", "sex"]
    },
    "report_details": {
        "type": "object",
        "properties": {
            "request_no": {"type": "string"},
            "bill_no": {"type": "string"},
            "referral_by": {"type": "string"},
            "reporting_date": {"type": "string"}
        }
    },
    "laboratory_details": {
        "type": "object",
        "properties": {
            "entered_by": {"type": "string"},
            "verified_by": {"type": "string"},
            "date": {"type": "string"},
            "time": {"type": "string"},
            "final_report": {
                "type": "object",
                "properties": {
                    "date": {"type": "string"},
                    "signature": {"type": "string"},
                    "title": {"type": "string"}
                }
            }
        }
    },
    "test_results": {
        "type": "object",
        "properties": {
            "test_type": {
                "type": "string", 
                "enum": [
                    "blood-tests-for-inflammation",
                    "cbc-blood-test",
                    "metabolic-panel",
                    "thyroid-panel-test",
                    "urinalysis-test"
                ]
            },
            "indicators": {
                "type": "object",
                "additionalProperties": {
                    "type": "object",
                    "properties": {
                        "value": {"type": "string"},
                        "reference": {"type": "string"},
                        "methodology": {"type": "string"},
                        "flag": {
                            "type": "string",
                            "enum": ["normal", "low", "high", "critical_low", "critical_high", "undetermined"]
                        }
                    },
                    "required": ["value", "reference"]
                }
            },
            "analysis": {
                "type": "object",
                "properties": {
                    "summary": {"type": "string"},
                    "recommendations": {"type": "string"},
                "markdown": {
                    "type": "string",
                    "description": "A markdown-formatted summary and analysis of the lab report, providing a structured interpretation of the test results. The output should be properly formatted for an MD viewer with appropriate headings and bullet points. Include the following sections: 1. **Date of Test** – Display the test date. 2. **General Explanation** – A brief overview of the lab test and its purpose. 3. **Abnormal Findings** – Highlight test results that fall outside reference ranges. Include: Test name, Measured value, Reference range, A brief interpretation of the result. 4. **Follow-Up Testing** – List recommended follow-up tests with reasons. 5. **Specialist Recommendations** – Suggest medical specialists for consultation and why. 6. **Lifestyle and Health Recommendations** – Provide general health and lifestyle suggestions based on findings. 7. **Conclusion** – Summarize key takeaways and next steps. Ensure a professional yet accessible tone. Use bold text for key values and bullet points where necessary to enhance readability."
                }
                },
                "required": ["markdown"]
            }
        },
        "required": ["test_type", "indicators"]
    }
    },
    "required": ["patient_details", "test_results"]
    }
}